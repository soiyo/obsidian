트랜잭션은 ==데이터베이스의 상태를 변화시키기 위해 수행하는 작업의 단위==를 뜻한다.

* 데이터베이스의 상태를 변화시킨다는 것은 아래의 SQL(질의어)를 이용하여 데이터베이스를 접근하는 것을 의미한다.
	* SELECT
	* INSERT
	* DELETE
	* UPDATE

* 작업 단위는 많은 질의어 명령문을 사람이 정하는 기준에 따라 정하는 것을 의미한다. (단순히 질의어 한 문장이 아니다.)
	* 트랜잭션 단위로 데이터가 처리되지 않는다면, 설계한 사람은 데이터 처리 시스템을 이해하기 힘들 뿐 아니라, 오작동시 원인을 찾기 어렵다.

즉, 트랜잭션은 작업의 완전성을 보장해준다.
또한 논리적인 작업을 완벽하게 처리하지 못할 경우 원 상태로 복구하여 작업의 일부만 적용되는 현상이 발생하지 않게 만들어주는 기능이다.

사용자 입장에서는 작업의 논리적 단위로 이해를 할 수 있고 시스템 입장에서는 데이터를 접근, 변경하는 프로그램의 단위가 된다.
#### 트랜잭션이 가져야 될 특성
- 원자성
	- 트랜젝션이 데이터베이스에 모두 반영되던가, 아니면 전혀 반영되지 않아야 한다는 것
	- 연산 : Commit(완료), Rollback(복귀)
		- Commit(완료) 연산 수행 : 트랜잭션 실행이 성공적으로 종료되었음을 선언
		- Rollback(복귀) 연산 수행 : 트랜잭션의 실행이 실패했음을 선언하는 것으로 원상복귀 시켜야 함
- 일관성
	- 트랜잭션의 작업 처리 결과가 항상 일관성이 있어야 한다.
		- 하나의 특정 트랜잭션이 완료될 때까지, 다른 트랜잭션이 특정 트랜잭션의 결과를 참조할 수 없다.
- 격리성
	- 둘 이상의 트랜잭션이 동시에 실행되고 있을 경우 어떤 하나의 트랜잭션이라도, 다른 트랜잭션의 연산에 끼어들 수 없다
- 영속성
	- 트랜잭션이 성공적으로 완료됬을 경우, 결과는 영구적으로 반영되어야 한다

#### 트랜잭션의 Commit, Rollback 연산
* Commit
	- 하나의 트랜잭션이 성공적으로 끝났고, 데이터베이스가 일관성있는 상태에 있을 때, ==하나의 트랜잭션이 끝났다==라는 것을 알려주기위해 사용하는 연산
	- 이 연산을 사용하면 수행했던 트랜잭션이 로그에 저장되며, 후에 Rollback 연산을 수행했었던 트랜잭션단위로 하는것을 도와준다. 
- Rollback
	- 하나의 트랜잭션 처리가 비정상적으로 종료되어==트랜잭션의 원자성이 깨진경우, 트랜잭션을 처음부터 다시 시작하거나, 트랜잭션의 부분적으로만 연산된 결과(일부만 실행된 결과)를 취소==시킨다.
	- 후에 사용자가 트랜잭션 처리된 단위대로 Rollback을 진행할 수도 있다.


#### 트랜잭션 상태

데이터베이스를 접근하여 갱신 연산을 수행하는 트랜잭션은 다섯가지 상태 중의 하나에 속한다.
![[Pasted image 20231203152446.png]]

![[Pasted image 20231203152502.png]]

![[Pasted image 20231203152508.png]]
Rollback 연산을 실행하고 철회 상태의 트랜젝션으로 종료되면 
취할 수 있는 조치는 다음과 같다.
1. **트랜젝션의 재시작**
	하드웨어나 시스템 소프트웨어 오류로 인해 철회된 트랜젝션은 다시 새로운 트랜젝션으로 취급되어 재시작
2. **트랜젝션의 폐기**
	트랜젝션의 내부적 오류로 재작성을 해야 하거나 원하는 데이터가 데이터베이스에 없는 경우에 취하는 조치

[출처1](https://sommda.tistory.com/97)
[출처2](https://mommoo.tistory.com/62)
[출처3](https://blackvill.tistory.com/241)